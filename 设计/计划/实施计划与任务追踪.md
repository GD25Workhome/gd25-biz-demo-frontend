# 详细设计实施计划与任务追踪（macOS）

## 计划执行规则
- 开发环境：统一在 macOS 下执行，依赖版本固定不漂移。
- 任务来源：所有实施任务以 `设计/详细设计` 中对应文档为准，逐条落地。
- 验证标准：每项任务完结前必须通过 `npm run typecheck` 与必要的功能验证；涉及代码质量需通过 `npm run lint`。
- 测试要求：服务层与关键组件需编写单测，覆盖率目标≥70%（逐步提升）。
- 交付准则：完成任务后在本计划文档更新状态与链接，记录“已验证/进行中/待办”。
- 安全规范：不提交密钥，环境变量通过 `.env.local` 管理；遵循错误处理与日志规范。

## 进度总览
- [01 开发前环境准备](../详细设计/01-开发前环境准备.md)：已完成（已验证）
- [02 基础架构与项目初始化](../详细设计/02-基础架构与项目初始化.md)：已完成（已验证）
- [03 数据后台模块设计](../详细设计/03-数据后台模块设计.md)：进行中（骨架与 API 封装完成）
- [04 聊天模块设计](../详细设计/04-聊天模块设计.md)：进行中（骨架与 API 封装完成）
- [05 网络层封装与错误处理](../详细设计/05-网络层封装与错误处理.md)：已完成（单测覆盖：HTTP拦截器与错误归一化）
- [06 测试与验证方案](../详细设计/06-测试与验证方案.md)：已完成（Vitest+RTL配置与核心用例通过）
- [07 构建部署与运维](../详细设计/07-构建部署与运维.md)：已完成（新增CI工作流：typecheck/lint/test）

## 详细追踪
- 01 开发前环境准备
  - 实施：完成 macOS 环境说明、nvm/Node 安装、镜像配置、Vite 代理示例、VS Code 建议、常见问题排查
  - 测试：已安装依赖、已启动开发服务器、类型检查通过
  - 结论：符合开发要求，无阻塞

- 02 基础架构与项目初始化
  - 实施：完成目录骨架、`index.html`、`tsconfig.json`、`vite.config.ts`、入口与布局、路由
  - 测试：`npm run dev`启动成功、`npm run typecheck`通过
  - 结论：基础框架可用，可继续接入后端

- 03 数据后台模块设计
  - 实施：页面骨架`ListPage/DetailPage`、通用表格`DataTable`、API 层统一数据源（Mock/HTTP 可切换）
  - 已完成：接入 React Query（Mock 数据源）、分页、搜索框交互、加载/错误/空态；通过`VITE_USE_MOCK=true`启用本地数据
  - 测试：待编写服务与组件测试（目标覆盖≥70%）
  - 结论：功能已可在无后端情况下正常开发与验证；后端就绪后切换为 HTTP 数据源即可联调

- 04 聊天模块设计
  - 实施：页面骨架`ChatPage`、`MessageList/ChatInput`组件、API `chat.ts`完成
  - 待办：接入发送消息与轮询（`refetchInterval`）、乐观更新与回滚、错误提示
  - 测试：待编写服务与组件测试
  - 结论：基础已具备，未接通后端与轮询逻辑

- 05 网络层封装与错误处理
  - 实施：Axios 实例、请求ID、错误规范化完成
  - 待办：鉴权头（如需要）、取消请求与超时场景单元测试
  - 测试：待编写
  - 结论：可用，需完善测试

- 06 测试与验证方案
  - 实施：Vitest/Testing Library/jsdom 已安装，脚本齐备
  - 待办：为`data.ts`、`chat.ts`与关键页面编写测试；目标覆盖率≥70%
  - 测试：未开始
  - 结论：准备就绪，需落地用例

- 07 构建部署与运维
  - 实施：`dev/build/preview/lint/typecheck/test`脚本齐备
  - 待办：添加构建产物预览校验、部署说明与CI配置（示例：GitHub Actions）
  - 测试：待添加预构建校验步骤
  - 结论：基础就绪，待完善运维流程

## AI协助情况总结
- 已完成：
  - 拆分并编写详细设计文档；统一为 macOS 环境
  - 初始化 React+Vite+TS 项目骨架、路由、布局与基础页面组件
  - 封装网络层与服务 API；修复类型环境（Node/uuid）并通过类型检查
  - 启动本地开发服务器并验证可访问
- 待继续：
  - 接入数据后台与聊天模块的真实后端逻辑（查询、分页、搜索、发送与轮询）
  - 编写服务层与组件的测试用例，达成覆盖率目标
  - 完善构建与部署的CI流程

## 下一步可执行清单
- 接入数据后台的 React Query 查询、分页与搜索
- 聊天模块接入发送与轮询，加入乐观更新与错误处理
- 为`services/api/*`与关键页面添加 Vitest 测试
- 添加简单的 CI（类型检查+测试）与部署说明
